import { isErrorlike } from "../types";
function getMimeType({ type }) {
    const charsetIndex = type.indexOf(";charset");
    return charsetIndex !== -1 ? type.substring(0, charsetIndex) : type;
}
/**
 * Returns information about a file.
 *
 * @param path The path to the file
 * @returns Information about the file
 */
export default async function getFileInfo(path) {
    const info = {
        blob: Bun.file(path),
        exists: false,
        isFile: false,
    };
    try {
        await info.blob.arrayBuffer();
        info.exists = true;
        info.isFile = true;
        const mimeType = getMimeType(info.blob);
        info.mimeType = mimeType === "application/octet-stream" ? undefined : mimeType;
    }
    catch (error) {
        if (isErrorlike(error)) {
            switch (error.code) {
                case "EISDIR":
                    info.exists = true;
                    break;
            }
        }
    }
    return info;
}
//# sourceMappingURL=get-file-info.js.map